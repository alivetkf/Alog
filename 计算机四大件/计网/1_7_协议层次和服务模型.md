# <center><font face="宋体" color=orange>1.7 协议层次和服务模型</font></center>   
## 协议层次
网络是一个复杂的系统，网络功能繁杂(数字信号的物理信号承载，点到点，路由，rdt，进程区分，应用等)。  
如何实现这个复杂的系统呢？   
**层次化**   
* 将网络复杂的功能分成功能明确的分层，每一层实现复杂之一或一组功能，功能中包含了其上层可以使用的功能即为：服务。
* 本层协议实体相互交互执行本层的协议动作，目的是实现本层功能，通过接口为上层提供更好的服务
* 本层的服务借助下层服务实现的本层协议实体之间交互带来的新功能(上层可利用)+更下层提供的服务来实现。  
      
**协议**
服务和服务访问点
* 服务(Service)
  底层实体向上层实体提供它们之间的通信的能力
  * 服务用户(Service user)
  * 服务提供者(Service provider)
* 服务访问点(Service Access Point)
  上层使用下层服务通过层间的接口(**地点**)，下层实体服务多个上层实体，SAP有标记不同上层实体的作用。
* 原语(primitive)
  上层使用下层服务的形式，高层使用底层提供的服务以及底层向高层提供的服务都是通过服务访问原语来进行交互的(**形式**)
* 服务的类型
  面向连接的服务和无连接的服务(**方式**)
  * 面向连接的服务
    * 连接(Connection)：两个通信实体为进行通信而建立的一种结合
    * 面向连接的服务通信的过程：建立连接->通信->拆除连接
    * 例子(网络层连接的虚电路)
    * 使用范围：对于大的数据块
    * 特点：保序
    * 服务类型：可靠字节流(远程登录)，不可靠的连接(数字化声音)
* 无连接的服务
  * 无连接：两个对等层实体在通信前不需要建立一个连接，不预留资源；不需要通信双方都活跃；
  * 特点：不可靠，可能重复，可能失序
  * IP分组，数据包
  * 适用范围：零星数据
  * 服务类型：不可靠的数据报(电子函件)
* 服务与协议
  * 服务与协议的区别
    * 服务 (Service)：低层实体向上层实提供它们之间的通信的能力，是通过原语 (primitive) 来操作的，垂直
    * 协议 (protocol)：对等层实体(peer entity) 之间在相互通信的过程中，需要遵循的规则的集合，水平
   * 服务与协议的联系
     * 本层协议的实现要靠下层提供的服务实现
     * 本层实体通过协议为上层提供更高级的服务
![数据单元](https://vip4.yunpng.top/2025/11/10/6911c3f2edb61.png)   
![](https://vip4.yunpng.top/2025/11/10/6911c59c6fa1c.png)       

**分层处理和实现复杂系统的好处？**
对付复杂的系统：     
概念化：结构清晰，便于标示网络组件，以及描述其相互关系
分层参考模型
结构化：模块化更易于维护和系统升级

改变某一层服务的实现不影响系统中的其他层次
对于其他层次而言是透明的
如改变登机程序并不影响系统的其它部分
改变 2 个秘书使用的通信方式不影响 2 个翻译的工作
改变 2 个翻译使用的语言也不影响上下 2 个层次的工作

分层思想被认为有害的地方？  
效率降低
## 协议栈
* 应用层：网络应用
为人类用户或者其他应用进程提供网络应用服务     
HTTP（超文本传输协议）、FTP（文件传输协议）、SMTP（简单邮件传输协议）、DNS（域名系统）、POP3/IMAP（电子邮件协议）等。
FTP, SMTP, HTTP, DNS
* 传输层：主机之间的数据传输
在网络层提供的端到端通信基础上，细分为进程到进程，将不可靠的通信变成可靠地通信     
TCP（传输控制协议）、UDP（用户数据报协议）、SCTP（流控制传输协议）等。
* 网络层：为数据报从源到目选择路由
主机之间的通信，端到端通信，不可靠    
IP（互联网协议），ICMP（互联网控制报文协议），ARP（地址解析协议），RARP（反向地址解析协议）等。
* 链路层：相邻网络节点间的数据传输
2 个相邻 2 点的通信，点到点通信，可靠或不可靠        
以太网协议（Ethernet）、PPP（点对点协议）、HDLC（高级数据链路控制）、ATM（异步传输模式）等。

* 物理层 
  没有专门的协议，物理层主要处理硬件的物理传输。例如电缆、光纤、无线电波等的传输标准。包括如 Ethernet (以太网)、DSL、Wi-Fi 等。   
  
![参考模型](https://vip4.yunpng.top/2025/11/10/6911c71f84952.png)    
![封装与解封装](https://vip4.yunpng.top/2025/11/10/6911c7a212481.png)