# <center><font face="宋体" color=orange>2.1 应用层原理</font></center>   
## 网络应用的体系架构
* C/S    
  * 服务器是一直运行的，有固定的IP和周知端口，可扩展性差
  * 客户端
    * 主动与服务器通信
    * 间歇性连接
    * 可能是动态IP
    * 不直接与其他客户通信
* P2P(对等)
  * 每一个节点即使客户端又是服务器，自扩展性，e.g. Gnutella，迅雷
* 混合体
  * Napster
   * 文件搜索：集中
    * 主机在中心服务器上注册资源
    * 主机向中心服务器查询资源位置
  * 文件传输：P2P
* 即时通信
  * 在线检测：集中
  * 两用户聊天：P2P        



## 进程通信
**进程是什么?**--在主机上运行的应用程序   
* 在同一个主机内，使用进程间通信机制(操作系统定义)
* 不同主机，通过交换报文(Message)来通信
### 分布式进程
**要解决的问题**   
1. 进程标示和寻址
   为了收发报文需要一个标示即SAP即endpoint(ip+port)
2. 传输层-应用层提供服务是如何  
   位置：层间SAP(TCP/IP:socket)
   形式：API(TCP/IP:socket API)    
   层间接口必须要携带的信息：1.要传输的报文 2.要传给谁 3.是谁传的    
   由传输层实体对这些信息进行TCP报文段(UDP数据报)进行封装    
   然后将IP地址交往下层IP实体，用于封装IP数据报：源IP，目标IP   
   但是每次通信传输报文都要携带如此之多的信息，太过繁琐且易出错，因此用一个代号来标示通信的双方或单方即socket   
   * TCP socket：(源IP,源端口，目标IP,目标端口)
   * UDP socket：(源IP，源端口)(传输时提供对方)    
  
![socket](https://vip4.yunpng.top/2025/11/11/6912a995ab121.png)    

3. 如何使用传输层提供的服务：   
   定义应用层协议：报文格式，解释，时序等    
   编制程序      
   **需要传输层提供什么样的服务**：
   * 数据丢失率
   * 吞吐
   * 延迟
   * 安全性

